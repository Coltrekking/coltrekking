<!DOCTYPE html>
<html ng-app="main">
	<head>
		<title>Página Inicial - Coltrekking</title>
		<meta charset="utf-8">

		<!--Adiciona jQuery-->
		<script src="../node_modules/jquery/dist/jquery.min.js"></script>

		<!--Adiciona Angular-->
		<script src="../node_modules/angular/angular.min.js"></script>
		<script src="../node_modules/angular-route/angular-route.min.js"></script>

		<!--Adiciona o Firebase-->
		<script src="https://www.gstatic.com/firebasejs/3.7.1/firebase.js"></script>
		<script src="https://apis.google.com/js/platform.js" async defer></script>

		<!--Importa Google Icon Font-->
		<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<!--Importa materialize.css-->
		<link type="text/css" rel="stylesheet" href="../node_modules/materialize-css/dist/css/materialize.min.css"  media="screen,projection"/>
		<!--Mobile Viewport-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<!--Adiciona firebase.js-->
		<script src="../js/firebase.js"></script>
		<!--Adiciona app.js-->
		<script src="../js/app.js"></script>

		<!--Importa CSS-->
		<link rel="stylesheet" type="text/css" href="../css/main/style.css">
	</head>
	
	<body>
		<div ng-controller="LoginController as login">
			<!--NavBar-->
			<div class="navbar-fixed">
				<nav class="nav-extended light-green z-depth-2">
					<div class="nav-wrapper light-green">
						<div class="row">
							<div class="container nav-container">
								<!--Logo-->
								<div id="logo-wrapper" class="col l3 hide-on-med-and-down">
									<a href="/main-page"><img id="logo" src="../rsc/logo/coltrekking-logo-3.png"></a>
								</div>

								<!--Botao Hamburger-->
								<a id="hamburguer" href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>

								<!--Search Bar-->
								<div class="col s10 m11 l6">
									<form>
										<div id="inputWrapper" class="input-field light-green lighten-1">
											<input id="search" type="search" placeholder="Pesquisar" required>
											<label class="label-icon" for="search"><i class="material-icons">search</i></label>
											<i class="material-icons">close</i>
										</div>
									</form>
								</div>

								<!--User Menu-->
								<div class="col l3 hide-on-med-and-down">
									<ul id="nav-user" class="right">
										<!--Mensagenss-->
										<li><i id="messageIcon" class="material-icons">message</i></li>
										<!--User Dropdown-->
										<li><a class="dropdown-button" href="#" data-beloworigin="true" data-activates="dropdown-menu"><img class="userImage circle" ng-src="{{ login.usuarioLogado.Foto }}"></a></li>
										<ul id="dropdown-menu" class="dropdown-content">
											<li><a href="#!" class="nome-usuario">{{ login.usuarioLogado.Nome }}</a></li>
											<li><a href="#!">Colocação no Ranking: <span>{{ login.usuarioLogado.Posicao }}º</span></a></li>
											<li><a href="#!">Fator K: <span>{{ login.usuarioLogado.FatorK }}</span></a></li>
											<li><a href="#!">Lista Negra: <span>{{ login.usuarioLogado.ListaNegra }}</span></a></li>
											<li class="divider"></li>
											<!--Logout Button-->
											<li><a id="sair-button" href="/logout" onclick="logOut();">Sair</a></li>
										</ul>
									</ul>
								</div>
							</div>
						</div>
					</div>

					<!--Tabs-->
					<div ng-controller="RouteController">
						<div class="container nav-container">
							<div class="nav-content">
								<ul class="tabs tabs-transparent" ng-show="$location.path() === '/'"> <!--So aparece na Pagina Principal-->
									<li class="tab"><a href="#news-feed">News Feed</a></li>
									<li class="tab"><a href="#eventos" class="active">Eventos</a></li>
									<li class="tab"><a href="#ranking">Ranking</a></li>
								</ul>
							</div>
						</div>
					</div>
				</nav>
			</div>
			
			<!--SideNav-->
			<ul class="side-nav" id="mobile-demo">
				<!--Nome + Foto-->
				<li id="cabecote"><a href="#!" class="nome-usuario"><img class="userImage circle" ng-src="{{ login.usuarioLogado.Foto }}"><span>{{ login.usuarioLogado.Nome }}</span></a></li>
				<li class="divider"></li>
				
				<!--Main Page Button-->
				<li><a id="main-page" href="/main-page">Página Principal</a></li>
				<li class="divider"></li>
				
				<!--Info do Usuario-->
				<li><a href="#!">Colocação no Ranking: <span>{{ login.usuarioLogado.Posicao }}º</span></a></li>
				<li><a href="#!">Fator K: <span>{{ login.usuarioLogado.FatorK }}</span></a></li>
				<li><a href="#!">Lista Negra: <span>{{ login.usuarioLogado.ListaNegra }}</span></a></li>
				<li class="divider"></li>
				
				<!--Logout Button-->
				<li><a id="sair-button" href="/logout" onclick="logOut();">Sair</a></li>
			</ul>
		</div>

		<!--Corpo Principal da Pagina-->
		<div id="corpo" class="container">
			<!--FAB-->
			<div ng-controller="LoginController as login"> <!--So mostra se for admin-->
				<div ng-if="login.usuarioLogado.Admin" class="fixed-action-btn">
					<a class="btn-floating btn-large deep-orange accent-2">
						<i class="large material-icons">add</i>
					</a>

					<ul>
						<li><a href="#!/create-event" class="btn-floating deep-orange accent-2"><i class="material-icons">event</i></a></li>
						<li><a href="#!/create-news" class="btn-floating deep-orange accent-2"><i class="material-icons">chat</i></a></li>
					</ul>
				</div>
			</div>

			<!--Paginas das Abas-->
			<div ng-controller="RouteController">
				<div ng-show="$location.path() === '/'">					
					<!--News Feed-->
					<div id="news-feed">
						<p>Bem Vindo ao News Feed do Coltrekking!</p>
					</div>


					<!--Eventos-->
					<div ng-controller="EventosController as eventos">
						<div id="eventos">
							<div class="row">
								<!--Fixacoes-->
								<div class="container col hide-on-med-and-down l4 right pin-top">
									<!--Eventos Cadastrados-->
									<div class="card" id="card-confirmados">
										<div class="card-content">
											<span class="card-title">Eventos Confirmados por Você</span>
											
											<p>Você ainda não confirmou presença em nenhum evento</p>
										</div>
									</div>
								</div>								
								
								<!--Cria os cards de evento-->
								<div class="container col s12 l7" ng-repeat="evento in eventos.eventos">
									<div class="card card-evento" ng-attr-id="{{evento.ID}}">
										<!--Cabecalho-->
										<div class="card-image">
											<!--Imagem-->
											<img ng-src="{{evento.Capa}}">
											<!--Nome-->
											<span class="card-title">{{evento.Nome}}</span>
											<!--FAB-->
											<a ng-click="confirmarEvento(this.evento)" class="btn-sign btn-floating btn-large halfway-fab waves-effect waves-light deep-orange accent-2"><i class="material-icons">add</i></a>
										</div>
										
										<!--Info do Evento-->
										<div class="card-content">
											<p>
												<i class="tiny material-icons">label</i>
												<span> Tipo:</span> {{evento.TipoString}}
											</p>
											
											<p ng-show="evento.Tipo == 2">
												<i class="tiny material-icons">label_outline</i>
												<span> Modalidade:</span> {{evento.TipoTrekking}}
											</p>
											
											<!--Nao mostra se for prelecao-->
											<p ng-show="evento.Tipo != 1">
												<i class="tiny material-icons">warning</i>
												<span> Dificuldade:</span> {{evento.Dificuldade}}
											</p>
											
											<p>
												<i class="tiny material-icons">today</i>
												<span> De</span> {{evento.DataInicio}}
												<span> a</span> {{evento.DataFim}}
											</p>
											
											<p class="truncate">
												<i class="tiny material-icons">location_on</i>
												<span> Local:</span> {{evento.Local}}
											</p>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>


					<!--Ranking-->
					<div ng-controller="RankingController as ranking">
						<div id="ranking">
							<div class="card">
								<div class="card-content">
									<!--Tabela-->
									<table class="striped">
										<!--Titulos da tabela-->
										<thead>
											<tr>
												<th>Posição</th>
												<th>Nome</th>
												<th>Fator K</th>
											</tr>
										</thead>

										<!--Linha para cada usuario-->
										<tbody>
											<tr ng-repeat="pessoa in ranking.ranking">
												<td>{{pessoa.Posicao}}º</td>
												<td>{{pessoa.Nome}}</td>
												<td>{{pessoa.FatorK}}</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
				

				<!--Rotas-->
				<div ng-view></div>
			</div>
		</div>


		<!--Adiciona materialize.js-->
		<script src="../node_modules/materialize-css/dist/js/materialize.min.js"></script>	
		<!--Adiciona script.js-->
		<script src="../js/main/script.js"></script>
	</body>
</html>